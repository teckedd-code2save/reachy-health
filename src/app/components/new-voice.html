<div class="flex flex-col items-center justify-center py-20">
  <!-- SVG Background with Waves and Microphone (Clickable Button) -->
  <button
     (click)="toggleListening()"
    [class.pulse]="isListening"
    [class.bg-red-500]="isListening"
    [class.bg-gray-400]="!isListening"
    class="bg-transparent border-none p-0 cursor-pointer focus:outline-none transition-transform hover:scale-105"
  >
    <svg xmlns="http://www.w3.org/2000/svg" width="600" height="300" viewBox="0 0 600 300" class="w-full max-w-2xl">
    <defs>
      <linearGradient id="waveGradient1" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#FDE1E4" />
        <stop offset="50%" stop-color="#F4D4E0" />
        <stop offset="100%" stop-color="#E8D5F2" />
      </linearGradient>
      
      <linearGradient id="waveGradient2" x1="0%" y1="0%" x2="100%" y2="0%">
        <stop offset="0%" stop-color="#F5E6EA" />
        <stop offset="50%" stop-color="#E8E4F0" />
        <stop offset="100%" stop-color="#E0E8F8" />
      </linearGradient>

      <radialGradient id="glowGradient" cx="50%" cy="50%" r="50%">
        <stop offset="0%" stop-color="#FF6B7A" stop-opacity="0.6" />
        <stop offset="50%" stop-color="#FF8B9A" stop-opacity="0.3" />
        <stop offset="100%" stop-color="#FFB3C0" stop-opacity="0" />
      </radialGradient>

      <filter id="softGlow">
        <feGaussianBlur stdDeviation="8" result="coloredBlur"/>
        <feMerge>
          <feMergeNode in="coloredBlur"/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>

    <!-- Top Wave -->
    <path d="M 0 80 Q 75 40, 150 80 T 300 80 T 450 80 T 600 80" 
          stroke="url(#waveGradient1)" stroke-width="3" fill="none" stroke-linecap="round"/>

    <!-- Middle Wave (subtle) -->
    <path d="M 0 150 Q 75 110, 150 150 T 300 150 T 450 150 T 600 150" 
          stroke="url(#waveGradient2)" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.7"/>

    <!-- Bottom Wave (lighter) -->
    <path d="M 0 200 Q 75 180, 150 200 T 300 200 T 450 200 T 600 200" 
          stroke="url(#waveGradient2)" stroke-width="2" fill="none" stroke-linecap="round" opacity="0.4"/>

    <!-- Glow/Halo around microphone -->
    <circle cx="300" cy="120" r="80" fill="url(#glowGradient)" filter="url(#softGlow)"/>
    <circle cx="300" cy="120" r="75" fill="url(#glowGradient)" opacity="0.5" filter="url(#softGlow)"/>

    <!-- White Circle Background -->
    <circle cx="300" cy="120" r="50" fill="white" filter="url(#softGlow)"/>

    <!-- Microphone Icon -->
    <g transform="translate(300, 120)">
      <path d="M 0 -10 C 5.5 -10 10 -5.5 10 0 L 10 8 C 10 12.4 6.4 16 2 16 C -2.4 16 -6 12.4 -6 8 L -6 0 C -6 -5.5 -1.5 -10 0 -10" 
            fill="none" stroke="#FF6B7A" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M 14 8 L 14 16 M -14 8 L -14 16 M 16 4 L 16 12 M -16 4 L -16 12" 
            stroke="#FF8B9A" stroke-width="1" stroke-linecap="round" opacity="0.7"/>
    </g>
  </svg>
  </button>

  <!-- Status Text -->
  <p class="mt-8 text-lg font-medium text-gray-700">
    {{ isListening ? "ðŸŽ¤ Listening..." : "ðŸŽ§ Tap to speak" }}
  </p>

  <!-- Animated Waves Below (when listening) -->
  @if (isListening) {
    <div class="mt-8 flex items-end justify-center gap-2 h-16">
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 40%; animation: wave 0.8s ease-in-out infinite;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 60%; animation: wave 0.8s ease-in-out infinite 0.1s;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 80%; animation: wave 0.8s ease-in-out infinite 0.2s;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 100%; animation: wave 0.8s ease-in-out infinite 0.3s;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 80%; animation: wave 0.8s ease-in-out infinite 0.4s;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 60%; animation: wave 0.8s ease-in-out infinite 0.5s;"></div>
      <div class="w-1 bg-gradient-to-t from-red-400 to-red-600 rounded-full" 
           style="height: 40%; animation: wave 0.8s ease-in-out infinite 0.6s;"></div>
    </div>

    <style>
      @keyframes wave {
        0%, 100% { height: 40%; }
        50% { height: 100%; }
      }
    </style>
  }

  <!-- Transcript Display -->
  @if (transcript) {
    <div class="mt-8 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg max-w-2xl border border-blue-200 shadow-md">
      <p class="text-gray-800 text-center leading-relaxed">{{ transcript }}</p>
    </div>
  }
</div>

<style>
  /* Button click handler - add to component TS */
  button {
    cursor: pointer;
  }
</style>