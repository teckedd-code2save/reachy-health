<div
  class="min-h-screen w-full bg-gradient-to-br from-green-50 to-blue-50 p-4 flex flex-col justify-between items-center"
>
  <!-- Header -->
  <header
    class="flex justify-between items-center rounded-lg shadow-lg p-2 md:p-3 w-full mx-auto bg-white/70 backdrop-blur-md"
  >
    <h1 class="text-2xl md:text-4xl roboto text-blue-600 pl-3">Reachy AI</h1>

    <!-- Language Switcher -->
    <div class="flex items-center gap-2">
      <select
        id="language"
        (change)="onLanguageChange($event)"
        class="border-2 border-gray-300 rounded-xl px-4 py-2 bg-white focus:ring-2 focus:ring-blue-400 focus:border-blue-400 focus:outline-none transition appearance-none cursor-pointer shadow-sm hover:border-gray-400"
      >
        <option value="en">English</option>
        <option value="fr">Fran√ßais</option>
        <option value="tw">Twi</option>
        <option value="ha">Hausa</option>
      </select>
    </div>
  </header>
  <!-- Header End -->

  <!-- Main Content -->
  <div
    class="max-w-4xl w-full items-center justify-center p-4 flex flex-col flex-grow"
  >
    <div class="text-center mb-12 w-4/5 md:w-2/3 mx-auto">
      <p i18n class="text-xl md:text-4xl text-gray-600">
        Seek Medical Help In Your Local Language
        <span class="underline decoration-sky-500 font-medium">With</span>
      </p>
      <p i18n class="text-xl md:text-3xl text-blue-600">
        Our Voice-Enabled Healthcare Platform
      </p>
    </div>

    <!-- Microphone Icon -->
    <div class="relative flex flex-col justify-center items-center mb-16 w-full">
      <div class="relative w-32 h-32 flex items-center justify-center">
        <!-- Microphone Button -->
        <button
          (click)="toggleVoiceRecording()"
          [disabled]="isTranscribing()"
          class="relative z-10 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 rounded-full shadow-xl"
        >
          <div
            [class]="
              isRecording()
                ? 'w-16 h-16 bg-gradient-to-br from-red-500 to-orange-500 rounded-full flex items-center justify-center shadow-lg cursor-pointer hover:shadow-xl transition-all'
                : 'w-16 h-16 bg-gradient-to-br from-blue-500 to-green-500 rounded-full flex items-center justify-center shadow-lg cursor-pointer hover:shadow-xl transition-all'
            "
          >
            @if (isTranscribing()) {
              <svg
                class="w-8 h-8 text-white animate-spin"
                fill="none"
                viewBox="0 0 24 24"
              >
                <circle
                  class="opacity-25"
                  cx="12"
                  cy="12"
                  r="10"
                  stroke="currentColor"
                  stroke-width="4"
                ></circle>
                <path
                  class="opacity-75"
                  fill="currentColor"
                  d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
                ></path>
              </svg>
            } @else {
              <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24">
                <path
                  d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"
                />
                <path
                  d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"
                />
              </svg>
            }
          </div>
        </button>
      </div>
      
      <!-- Status Text -->
      <p class="mt-4 text-sm text-gray-600 text-center">
        @if (isRecording()) {
          <span class="text-red-600 font-medium">üî¥ Recording... Click to stop</span>
        } @else if (isTranscribing()) {
          <span class="text-blue-600 font-medium">‚è≥ Transcribing and detecting language...</span>
        } @else {
          <span>Click microphone to speak and detect your language</span>
        }
      </p>

      <!-- Transcription Display -->
      @if (transcriptionText()) {
        <div
          class="mt-4 max-w-md w-full p-4 bg-white rounded-lg shadow-md border border-blue-200"
        >
          <p class="text-xs text-gray-500 mb-1">Detected:</p>
          <p class="text-sm text-gray-800">{{ transcriptionText() }}</p>
        </div>
      }

      <!-- Error Message -->
      @if (transcriptionError()) {
        <div
          class="mt-4 max-w-md w-full p-3 bg-red-50 border border-red-200 rounded-lg"
        >
          <p class="text-xs text-red-700">{{ transcriptionError() }}</p>
        </div>
      }
    </div>

    <!-- Role Selection -->
    <div class="grid md:grid-cols-2 gap-6">
      <!-- Patient Card -->
      <button
        (click)="navigateToRole('patient')"
        class="bg-white rounded-xl hover:shadow-2xl transition-all transform hover:-translate-y-1 text-left group p-4"
      >
        <div class="flex items-center text-blue-600 font-medium">
          <svg
            class="w-5 h-5 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"
            />
          </svg>
          <span i18n>I have an ailment</span>
        </div>
      </button>

      <!-- Doctor Card -->
      <button
        (click)="navigateToRole('doctor')"
        class="bg-white rounded-xl hover:shadow-2xl transition-all transform hover:-translate-y-1 text-left group p-4"
      >
        <div class="flex items-center text-green-600 font-medium">
          <svg
            class="w-5 h-5 mr-2"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"
            />
          </svg>
          <span i18n>I am a medical professional</span>
        </div>
      </button>
    </div>
  </div>
</div>
